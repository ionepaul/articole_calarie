@model ArticoleCalarie.Models.ProductViewModel
@{
    ViewBag.Title = "Details";
    bool hasMaterialDetails = !string.IsNullOrEmpty(Model.MaterialDetails);
    bool hasSizeChart = !string.IsNullOrEmpty(Model.SizeChartImage);
    var sizes = Model.Size.Split(',');
}

<div class="main-content product-single-page">
    <div class="container">
        @if (User.IsInRole("Admin"))
        {
            <div class="breadcrumbs">
                <a href="javascript:void(0)" id="back">Inapoi la listă</a> | @Html.ActionLink("Editează", "Edit", new { id = Model.Id })
            </div>
        }
        else
        {
            <div class="breadcrumbs">
                to be bread crumb
            </div>
        }

        <div class="product-single-content">
            <div class="about-product">
                <div class="details-thumb">
                    <div class="owl-carousel has-thumbs" data-autoplay="false" data-nav="false" data-dots="false" data-loop="true" data-slidespeed="800" data-margin="30" data-responsive='{"0":{"items":1}, "640":{"items":1}, "768":{"items":1}, "1024":{"items":1}, "1200":{"items":1}}'>
                        @foreach (var image in Model.ImagesList)
                        {
                            <div class="details-item">
                                <div class="main-img">
                                    <img src="~/images/products/@image" alt="@Model.ProductName">
                                </div>
                            </div>
                        }
                    </div>
                </div>
                <div class="details-info">
                    @if (Model.IsOnSale)
                    {
                        <div class="group-flash">
                            <a class="product-name">@Model.ProductName </a>  <span class="flash sale">-@Model.SalePercentage%</span> 
                        </div>           
                    }
                    else
                    {
                        <a class="product-name">@Model.ProductName </a>
                    }

                    <div>Cod Produs: @Model.ProductCode</div>
                    <br>

                    <div class="price">
                        @if (Model.IsOnSale)
                        {
                            <span class="del">@Model.Price </span>
                                    <span class="ins">@Model.PriceAfterSaleApplied RON</span>
                        }
                        else
                        {
                            <span class="ins">@Model.Price RON</span>
                        }
                    </div>
                    <br />

                    <div><strong class="details-section">Mărimi</strong> 
                        <select id="size">
                            @foreach (var size in sizes)
                            {
                                <option>@size</option>
                            }
                        </select>
                    </div>
                    <div class="des"><strong class="details-section">Descriere</strong> @Model.Description</div>
                    <strong class="details-section">Culori</strong>
                    <ul class="list-color">
                        @foreach (var color in Model.ColorsViewModel)
                        {
                            <li><a id="@color.Name" title="@color.Name" style="background-color: @color.Hex"></a></li>
                        }
                    </ul>
                    <div class="quantity">
                        <input id="quantity" class="input-text qty text" type="text" size="4" title="Qty" value="1" name="quantity">
                        <div class="group-quantity-button">
                            <a class="plus" href="#"><i class="fa fa-sort-asc" aria-hidden="true"></i></a>
                            <a class="minus" href="#"><i class="fa fa-sort-desc" aria-hidden="true"></i></a>
                        </div>
                    </div>
                    <a id="addToCardBtn" class="add-to-cart">ADD TO CART</a>
                    <div class="material-details">
                        @if (hasMaterialDetails)
                        {
                            <h4>Detalii Material</h4>
                            <p>@Model.MaterialDetails</p>
                        }
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="product-size-chart">
        @if (hasSizeChart)
        {
            <h4>Tabel de marimi</h4>
            <p><img src="~/images/products/@Model.SizeChartImage" /></p>
        }
    </div>
</div>

@{ 
    var cartPrice = Model.IsOnSale ? Model.PriceAfterSaleApplied : Model.Price.AsDecimal();
}

@section scripts {
    <script>
        var productName = '@Model.ProductName';
        var productImage = '@Model.ImagesList.First()';
        var price = '@cartPrice.ToString()';
        var productCode = '@Model.ProductCode'
    </script>
}