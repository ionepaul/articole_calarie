@model ArticoleCalarie.Models.OrderViewModel
@using ArticoleCalarie.Models.Enums

<div class="order-details">
    <table class="table">
        <tr>
            <th>
                Produs
            </th>
            <th>
                Cantitate
            </th>
            <th>
                Culoare
            </th>
            <th>
                Marime
            </th>
            <th>
                Pret
            </th>
        </tr>

        @foreach (var item in Model.ShoppingItems)
        {
            <tr>
                <td>
                    @Html.DisplayFor(modelItem => item.ProductName)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.Quantity)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.Color)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.Size)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.Price)
                </td>
            </tr>
        }
    </table>

    <div class="col-md-6">
        <h5>Adresa de livrare</h5>
        <div class="address-details-wrapper">
            <p class="name">@Model.DeliveryAddress.FullName</p>
            <p> @Model.DeliveryAddress.PhoneNumber</p>
            <p> @Model.DeliveryAddress.AddressLine1<span>, </span>@Model.DeliveryAddress.AddressLine2</p>
            <p>@Model.DeliveryAddress.PostalCode<span>, </span>@Model.DeliveryAddress.City</p>
            <p> @Model.DeliveryAddress.County<span>, </span>@Model.DeliveryAddress.Country</p>
        </div>
    </div>

    <div class="col-md-6">
        <h5>Adresa de facturare</h5>
        <div class="address-details-wrapper">
            <p class="name">@Model.BillingAddress.FullName</p>
            <p> @Model.BillingAddress.PhoneNumber</p>
            <p> @Model.BillingAddress.AddressLine1<span>, </span>@Model.BillingAddress.AddressLine2</p>
            <p>@Model.BillingAddress.PostalCode<span>, </span>@Model.BillingAddress.City</p>
            <p> @Model.BillingAddress.County<span>, </span>@Model.BillingAddress.Country</p>
        </div>
    </div>

    <div class="actions">
        @if (Model.OrderStatus == OrderStatusViewEnum.REGISTRED)
        {
            <button onclick="openConfirmOrderModal('@Model.OrderNumber')">Confirma comanda</button>

            <div id="confirm-order-model-@Model.OrderNumber" class="modal" tabindex="-1" role="dialog">
                <div class="modal-dialog" role="document">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h5 class="modal-title"><b>Comanda #@Model.OrderNumber</b></h5>
                            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                <span aria-hidden="true">&times;</span>
                            </button>
                        </div>
                        <div class="modal-body">
                            <p>Esti sigur ca vrei confirmi <b>comanda #@Model.OrderNumber</b>?</p>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-primary" onclick="changeOrderStatus('@Model.OrderNumber', '@OrderStatusViewEnum.CONFIRMED')">Da</button>
                            <button type="button" class="btn btn-secondary" data-dismiss="modal">Nu</button>
                        </div>
                    </div>
                </div>
            </div>
        }

        @if (Model.OrderStatus == OrderStatusViewEnum.CONFIRMED)
        {
            <button onclick="openShipOrderModel('@Model.OrderNumber')">Comanda a fost trimisa</button>

            <div id="ship-order-modal-@Model.OrderNumber" class="modal" tabindex="-1" role="dialog">
                <div class="modal-dialog" role="document">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h5 class="modal-title"><b>Comanda #@Model.OrderNumber</b></h5>
                            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                <span aria-hidden="true">&times;</span>
                            </button>
                        </div>
                        <div class="modal-body">
                            <p>In cat timp va ajunge <b>comanda #@Model.OrderNumber?</b> </p>
                            <input id="order-time" type="text"/> 
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-primary" onclick="changeOrderStatus('@Model.OrderNumber', '@OrderStatusViewEnum.SHIPPED')">Confirma</button>
                            <button type="button" class="btn btn-secondary" data-dismiss="modal">Anuleaza</button>
                        </div>
                    </div>
                </div>
            </div>
        }

        @if (Model.OrderStatus == OrderStatusViewEnum.SHIPPED)
        {
            <button onclick="openCompleteOrderModal('@Model.OrderNumber')">Comanda a fost completa</button>

            <div id="complete-order-modal-@Model.OrderNumber" class="modal" tabindex="-1" role="dialog">
                <div class="modal-dialog" role="document">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h5 class="modal-title"><b>Comanda #@Model.OrderNumber</b></h5>
                            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                <span aria-hidden="true">&times;</span>
                            </button>
                        </div>
                        <div class="modal-body">
                            <p>Esti sigur ca vrei sa marchezi <b>comanda #@Model.OrderNumber</b> ca fiind efectuata cu succes?</p>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-primary" onclick="changeOrderStatus('@Model.OrderNumber', '@OrderStatusViewEnum.COMPLETE')">Da</button>
                            <button type="button" class="btn btn-secondary" data-dismiss="modal">Nu</button>
                        </div>
                    </div>
                </div>
            </div>
        }
    </div>
</div>
