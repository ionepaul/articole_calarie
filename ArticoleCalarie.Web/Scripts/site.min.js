$(document).ready(function () { $('#back').on('click', function () { window.history.back() }), changeLogo(), $('#content-pager a[href]').on('click', function () { showLoader() }), $('#menu-main-menu a[href]').on('click', function () { showLoader() }), $('form').not('#logoutForm').on('submit', function () { $(this).valid() && showLoader() }), $('a').not('.no-loading').on('click', function () { showLoader() }), $(window).load(function () { setTimeout(function () { hideLoader() }, 200), checkCarousel(), checkPagination() }), $(window).resize(function () { changeLogo(), checkCarousel() }), $('#log-out-btn').on('click', function () { $('#logoutForm').submit() }), window.location.hash && '#_=_' == window.location.hash && (window.location.hash = ''), initCookieBar(); var a; 0 < $('.product-single-page .list-color li').length && ($('.product-single-page .list-color li').first().addClass('current'), a = $('.product-single-page .list-color li:first a').attr('id')), $('.product-single-page .list-color li a').on('click', function () { $('.list-color li').removeClass('current'), $(this).parent().addClass('current'), a = $(this).attr('id') }), $('#addToCardBtn').on('click', function () { let b = { productName: productName, imageName: productImage, quantity: $('#quantity').val(), size: $('#size').val(), price: price, color: a, productCode: productCode, productCategoryName: productCategoryName, productSubcategoryName: productSubcategoryName, productSubcategoryId: productSubcategoryId }, c = window.location.origin + '/order/addtocart'; showLoader(), $.ajax({ type: 'POST', url: c, data: { shoppingCartItem: b }, success: function (d) { $('#shopping-cart').html(d), hideLoader(), window.scrollTo(0, 0), $('#added-to-order').fadeIn('slow'), setTimeout(function () { $('#added-to-order').fadeOut('slow') }, 3e3) }, error: function () { hideLoader(), window.location = '/error' }, async: !0, timeout: 6e4 }) }), $('#user-newsletter-checkbox').on('click', function () { var b = document.getElementById('user-newsletter-checkbox').checked; let c = window.location.origin + '/account/updatenewslettersubscription?issubscribed=' + b; showLoader(), $.ajax({ type: 'POST', url: c, success: function () { hideLoader() }, error: function () { hideLoader(), window.location = '/error' }, async: !0, timeout: 6e4 }) }) }); function initCookieBar() { let a = window.location.origin + '/home/cookiesaccepted'; $('#cookie-accept-btn').on('click', function () { $.ajax({ type: 'POST', cache: !1, url: a, success: function () { $('.cookies-bar').css('display', 'none') } }) }) } function showLoader() { $('#spinner').removeClass('hidden') } function hideLoader() { $('#spinner').addClass('hidden') } function checkCarousel() { let a = -1 < window.location.pathname.indexOf('produse'); if (a && 0 < $('.owl-thumbs').length) { var b = $('.owl-thumbs').first(), c = $(b).height(); c > $('.main-img').first().height() && $('.owl-carousel').first().height(c) } } function checkPagination() { 0 < $('.pagination').length && 0 < $('.pagination > li.disabled.PagedList-ellipses a').length && $('.pagination > li.disabled.PagedList-ellipses a').addClass('no-loading hidden') } function getRelatedProducts(a) { let b = window.location.origin + '/product/getrelatedproducts'; $.ajax({ type: 'GET', cache: !1, url: b, success: function (c) { $(a).html(c) } }) } function deleteFromCart(a) { let b = window.location.origin + '/order/deletefromcart?productCode=' + a; showLoader(), $.ajax({ type: 'POST', url: b, success: function (c) { $('#shopping-cart').html(c), -1 < window.location.href.indexOf('comanda/produse') ? window.location.reload() : hideLoader() }, error: function () { hideLoader(), window.location = '/error' }, async: !0, timeout: 6e4 }) } function openDeleteAccountModal() { $('#delete-account-modal').modal('toggle') } function deleteAccount() { let a = window.location.origin + '/account/deleteuser'; showLoader(), $.ajax({ url: a, type: 'POST', cache: !1, success: function () { window.location = '/' }, error: function () { window.location = '/error' } }) } function changeLogo() { 639 > $(window).width() ? $('#appLogo').attr('src', '/images/mobile_logo.png') : $('#appLogo').attr('src', '/images/articole-calarie-logo.png') } function viewProduct(a, b, c, d, e) { showLoader(), window.location.href = window.location.origin + '/produse/' + a + '/' + b + '/' + c + '/' + d + '/' + e }